<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daydream Adelaide Intranet</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <h1>Daydream Adelaide Intranet</h1>
  
  <!-- Toolbar -->
  <div id="toolbar">
    <div class="toolbar-section">
      <button id="add-widget-btn" class="toolbar-btn">
        <span class="btn-icon">+</span>
        Add Widget
      </button>
      <button id="reset-layout-btn" class="toolbar-btn">
        <span class="btn-icon">↻</span>
        Reset Layout
      </button>
    </div>
    <div class="toolbar-section">
      <span class="toolbar-hint">Drag widgets to rearrange • Click × to remove</span>
    </div>
  </div>

  <!-- Add Widget Modal -->
  <div id="add-widget-modal" class="overlay">
    <div class="overlay-content">
      <span class="close-overlay">&times;</span>
      <h3>Add New Widget</h3>
      <div class="widget-options">
        <button class="widget-option" data-type="custom-note">
          <div class="option-icon">N</div>
          <div class="option-text">
            <strong>Custom Note</strong>
            <small>Create a personal note widget</small>
          </div>
        </button>
        <button class="widget-option" data-type="links">
          <div class="option-icon">L</div>
          <div class="option-text">
            <strong>Quick Links</strong>
            <small>Add useful links</small>
          </div>
        </button>
        <button class="widget-option" data-type="todo">
          <div class="option-icon">T</div>
          <div class="option-text">
            <strong>Tasks</strong>
            <small>Track your tasks</small>
          </div>
        </button>
        <button class="widget-option" data-type="timer">
          <div class="option-icon">T</div>
          <div class="option-text">
            <strong>Timer</strong>
            <small>Pomodoro or countdown timer</small>
          </div>
        </button>
      </div>
    </div>
  </div>

  <div id="dashboard">
    <div class="widget" data-id="announcements" draggable="true">
      <button class="remove-widget" aria-label="Remove widget">&times;</button>
      <h2>Announcements</h2>
      <p>Welcome to Daydream Adelaide! Stay tuned for updates and exciting news throughout the event.</p>
    </div>
<div class="widget" data-id="schedule" draggable="true">
  <button class="remove-widget" aria-label="Remove widget">&times;</button>
  <h2>Schedule</h2>
  <ul id="schedule-list"></ul>
</div>
<script>
async function loadSchedule() {
  try {
    const response = await fetch('schedule.json');
    if (!response.ok) throw new Error('Could not fetch schedule.json');

    const scheduleItems = await response.json();
    const list = document.getElementById('schedule-list');
    list.innerHTML = '';

    const now = new Date();

    const eventsWithDates = scheduleItems.map(item => ({
      ...item,
      date: parseTimeToDate(item.time)
    }));

    let upcomingEvents = eventsWithDates.filter(item => item.date >= now);

    if (upcomingEvents.length === 0) {
      upcomingEvents = eventsWithDates.slice(0, 4);
    } else {
      upcomingEvents = upcomingEvents.slice(0, 4);
    }

    upcomingEvents.forEach(item => {
      const li = document.createElement('li');
      li.textContent = `${item.time} - ${item.event}`;
      list.appendChild(li);
    });
  } catch (error) {
    console.error(error);
    const list = document.getElementById('schedule-list');
    list.innerHTML = '<li>Failed to load schedule.</li>';
  }
}

function parseTimeToDate(timeStr) {
  const [time, modifier] = timeStr.split(' ');
  let [hours, minutes] = time.split(':').map(Number);

  if (modifier === 'PM' && hours !== 12) {
    hours += 12;
  } else if (modifier === 'AM' && hours === 12) {
    hours = 0;
  }

  const date = new Date();
  date.setHours(hours, minutes, 0, 0);
  return date;
}

// Run on DOM ready
document.addEventListener('DOMContentLoaded', () => {
  loadSchedule();
});
</script>

    <div class="widget" data-id="weather" draggable="true">
      <button class="remove-widget" aria-label="Remove widget">&times;</button>
      <h2>Weather</h2>
      <div id="weather-content">
        <p>Loading Adelaide weather...</p>
      </div>
    </div>
  <div class="widget" data-id="quicklinks" draggable="true">
    <button class="remove-widget" aria-label="Remove widget">&times;</button>
    <h2>Quick Links</h2>
    <ul>
      <li><a href="#" class="open-overlay" data-target="wifi">WiFi Info</a></li>
        <li><a href="#" class="open-overlay" data-target="map">Venue Map</a></li>
        <li><a href="#" class="open-overlay" data-target="conduct">Code of Conduct</a></li>
      </ul>
    </div>
    <div class="widget">
    <div class="apps-grid">
      <button class="remove-widget" aria-label="Remove widget">&times;</button>
      <a href="apps/photos/photos.html" class="app-icon" draggable="true" data-id="app-photos">
        <img src="icons/photos.png" alt="Photos">
        <span>Photos</span>
      </a>
      <a href="apps/calendar/calendar.html" class="app-icon" draggable="true" data-id="app-calendar">
        <img src="icons/calendar.png" alt="Calendar">
        <span>Calendar</span>
      </a>
      <a href="apps/faq/faq.html" class="app-icon" draggable="true" data-id="app-chat">
        <img src="icons/faq.png" alt="FAQ">
        <span>FAQ</span>
      </a>
      <a href="apps/music/index.html" class="app-icon" draggable="true" data-id="app-tbd">
        <img src="icons/music.png" alt="TBD">
        <span>TBD</span>
      </a>
      <a href="apps/mail/index.html" class="app-icon" draggable="true" data-id="app-tbd">
        <img src="icons/mail.png" alt="TBD">
        <span>Mail</span>
      </a>
      <a href="apps/settings/index.html" class="app-icon" draggable="true" data-id="app-tbd">
        <img src="icons/settings.png" alt="TBD">
        <span>Settings</span>
      </a>
    </div>
    </div>

    <div class="widget" data-id="notes" draggable="true">
      <button class="remove-widget" aria-label="Remove widget">&times;</button>
      <h2>Notes</h2>
      <textarea placeholder="Write your notes here... 
• Ideas for your project
• People you've met  
• Things to remember"></textarea>
    </div>
    </div>

  <!-- Overlays -->
  <div id="overlay-wifi" class="overlay">
    <div class="overlay-content">
      <span class="close-overlay">&times;</span>
      <h3>WiFi Information</h3>
      <p><strong>Network:</strong> DaydreamHack<br>
      <strong>Password:</strong> hacktheday2025</p>
      <p><small>Having trouble connecting? Ask a team member for assistance!</small></p>
    </div>
  </div>

  <div id="overlay-map" class="overlay">
    <div class="overlay-content">
      <span class="close-overlay">&times;</span>
      <h3>Venue Map</h3>
      <p>Find the full venue map near the registration desk or <a href="#" style="color: #667eea; font-weight: 500;">download it here</a>.</p>
      <p><small>Key locations: Registration (entrance), Main Hall (presentations), Workshop Rooms (A-D), Food Court (level 2)</small></p>
    </div>
  </div>

  <div id="overlay-conduct" class="overlay">
    <div class="overlay-content">
      <span class="close-overlay">&times;</span>
      <h3>Code of Conduct</h3>
      <p><strong>Be kind. Be respectful.</strong> Harassment of any kind is not tolerated.</p>
      <p>We're committed to providing a welcoming environment for everyone, regardless of background or experience level.</p>
      <p><small>Need support? Contact any staff member wearing a Daydream Adelaide t-shirt.</small></p>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
